name: build-and-test

on: push
    
env:
  CC: gcc-4.9
  CXX: g++-4.9
  secret_account: ${{ secrets.DOCKER_USERNAME }}
  sec: hello
  MAVEN_VERSION: dockerpath:abc

jobs:      
  prepare-image:
    runs-on: ubuntu-20.04
    outputs:
      run: echo "aofewaokfew"
    steps:
    - name: Echo output
      run: echo ${{ needs.prepare-image.outputs }}

# Testing Cache Only
  test-abc:
    runs-on: ubuntu-20.04
    needs: [prepare-image]
    services:
      dtc:
        image: ${{ needs.prepare-image.outputs.dockerpath }}
    steps:
      - name: Echo output
        run: echo ${{ needs.prepare-image.outputs.dockerpath }}
          
